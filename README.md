### Веб приложение с API интерфейсом
## «онлайн платформа торговой сети электроники»

---

---

### [Установка](#title1)
### [Логика работы системы](#title2)
### [Валидация и Права доступа](#title3)
### [Запуск](#title4)
### [Тесты](#title5)

---

---

## <a id="title1">Для корректной работы системы необходимо:</a>

- Склонируйте репозиторий командой 
`git clone`
- Запустите виртуальное окружение `poetry shell`.
- Установите зависимости `poetry install`.
- Создайте в корне проекта файл .env и внесите в него все переменные окружения по образцу из файла .env.sample (по умолчанию в
  системе
  используется база данных PostgreSQL)
- Запустите миграции (Предварительно не забудьте создать БД)
```shell
python manage.py migrate
```
- Создайте суперпользователя  
```shell
python manage.py csu
```

<a id="title2">Логика работы системы</a>
---
Реализована модель сети по продаже электроники.
Сеть представляет собой иерархическую структуру из 3 уровней:

Завод;
Розничная сеть;
Индивидуальный предприниматель.

Каждое звено сети ссылается только на одного поставщика оборудования (не обязательно предыдущего по иерархии).  
Важно отметить, что уровень иерархии определяется не названием звена, 
а отношением к остальным элементам сети,  
т.е. завод всегда находится на 0 уровне, 
а если розничная сеть относится напрямую к заводу, минуя остальные звенья - её уровень - 1.

В административной панели Django добавлена возможность фильтровать торговые звенья по названию города,  
а так же добавлена возможность очистить задолженность перед поставщиком у выбранных объектов.

В списке торговых звеньев при наличии поставщика у объекта, нажимая на имя этого поставщика, вас перенаправит на его страницу.

Так же в API запросах реализована возможность фильтрации объектов по определенной стране.


<a id="title3">Валидация и Права доступа</a>
---

- У звена сети "Завод" не может быть поставщика, а так же Задолженности перед поставщиком.
- Без поставщика может быть только "Завод", так как он всегда находится на 0 уровне.
- Завод выбирает продукты которые будет поставлять,  
соответственно все последующие звенья цепи могут выбрать только продукты,  
принадлежащие своему поставщику.
- Запрещено обновление через API поля «Задолженность перед поставщиком».
- Доступ к API имеют только активные сотрудники.
- Иерархическая структура ограничена 3 уровнями.

<a id="title4">Запуск (на Windows)</a>
---

- Для запуска приложения, используйте команду 
```shell
python manage.py runserver
```

<a id="title5">Тесты</a>
---

Проект покрыт тестами при использовании unitTest.  
Покрытие проекта тестами составляет 95%.  
отчет о покрытии находится в файле ```coverage.txt```
